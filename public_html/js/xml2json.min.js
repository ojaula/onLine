function X2JS(t){var o="1.1.4";t=t||{};g();p();function g(){if(t.escapeMode===undefined){t.escapeMode=true;}t.attributePrefix=t.attributePrefix||"_";t.arrayAccessForm=t.arrayAccessForm||"none";t.emptyNodeForm=t.emptyNodeForm||"text";if(t.enableToStringFunc===undefined){t.enableToStringFunc=true;}t.arrayAccessFormPaths=t.arrayAccessFormPaths||[];if(t.skipEmptyTextNodesForObj===undefined){t.skipEmptyTextNodesForObj=true;}if(t.stripWhitespaces===undefined){t.stripWhitespaces=true;}}function p(){if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"");};}}var f={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function r(v){var w=v.localName;if(w==null){w=v.baseName;}if(w==null||w==""){w=v.nodeName;}return w;}function m(v){return v.prefix;}function n(v){if(typeof(v)=="string"){return v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");}else{return v;}}function i(v){return v.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/");}function j(z,w,y){switch(t.arrayAccessForm){case"property":if(!(z[w] instanceof Array)){z[w+"_asArray"]=[z[w]];}else{z[w+"_asArray"]=z[w];}break;}if(!(z[w] instanceof Array)&&t.arrayAccessFormPaths.length>0){var v=0;for(;v<t.arrayAccessFormPaths.length;v++){var x=t.arrayAccessFormPaths[v];if(typeof x==="string"){if(x==y){break;}}else{if(x instanceof RegExp){if(x.test(y)){break;}}else{if(typeof x==="function"){if(x(z,w,y)){break;}}}}}if(v!=t.arrayAccessFormPaths.length){z[w]=[z[w]];}}}function u(x,C){if(x.nodeType==f.DOCUMENT_NODE){var D=new Object;var v=x.childNodes;for(var E=0;E<v.length;E++){var w=v.item(E);if(w.nodeType==f.ELEMENT_NODE){var B=r(w);D[B]=u(w,B);}}return D;}else{if(x.nodeType==f.ELEMENT_NODE){var D=new Object;D.__cnt=0;var v=x.childNodes;for(var E=0;E<v.length;E++){var w=v.item(E);var B=r(w);if(w.nodeType!=f.COMMENT_NODE){D.__cnt++;if(D[B]==null){D[B]=u(w,C+"."+B);j(D,B,C+"."+B);}else{if(D[B]!=null){if(!(D[B] instanceof Array)){D[B]=[D[B]];j(D,B,C+"."+B);}}(D[B])[D[B].length]=u(w,C+"."+B);}}}for(var y=0;y<x.attributes.length;y++){var z=x.attributes.item(y);D.__cnt++;D[t.attributePrefix+z.name]=z.value;}var A=m(x);if(A!=null&&A!=""){D.__cnt++;D.__prefix=A;}if(D["#text"]!=null){D.__text=D["#text"];if(D.__text instanceof Array){D.__text=D.__text.join("\n");}if(t.escapeMode){D.__text=i(D.__text);}if(t.stripWhitespaces){D.__text=D.__text.trim();}delete D["#text"];if(t.arrayAccessForm=="property"){delete D["#text_asArray"];}}if(D["#cdata-section"]!=null){D.__cdata=D["#cdata-section"];delete D["#cdata-section"];if(t.arrayAccessForm=="property"){delete D["#cdata-section_asArray"];}}if(D.__cnt==1&&D.__text!=null){D=D.__text;}else{if(D.__cnt==0&&t.emptyNodeForm=="text"){D="";}else{if(D.__cnt>1&&D.__text!=null&&t.skipEmptyTextNodesForObj){if((t.stripWhitespaces&&D.__text=="")||(D.__text.trim()=="")){delete D.__text;}}}}delete D.__cnt;if(t.enableToStringFunc&&D.__text!=null||D.__cdata!=null){D.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"");};}return D;}else{if(x.nodeType==f.TEXT_NODE||x.nodeType==f.CDATA_SECTION_NODE){return x.nodeValue;}}}}function k(C,z,B,w){var y="<"+((C!=null&&C.__prefix!=null)?(C.__prefix+":"):"")+z;if(B!=null){for(var A=0;A<B.length;A++){var x=B[A];var v=C[x];y+=" "+x.substr(t.attributePrefix.length)+"='"+v+"'";}}if(!w){y+=">";}else{y+="/>";}return y;}function h(w,v){return"</"+(w.__prefix!=null?(w.__prefix+":"):"")+v+">";}function q(w,v){return w.indexOf(v,w.length-v.length)!==-1;}function s(w,v){if((t.arrayAccessForm=="property"&&q(v.toString(),("_asArray")))||v.toString().indexOf(t.attributePrefix)==0||v.toString().indexOf("__")==0||(w[v] instanceof Function)){return true;}else{return false;}}function l(x){var w=0;if(x instanceof Object){for(var v in x){if(s(x,v)){continue;}w++;}}return w;}function a(x){var w=[];if(x instanceof Object){for(var v in x){if(v.toString().indexOf("__")==-1&&v.toString().indexOf(t.attributePrefix)==0){w.push(v);}}}return w;}function e(w){var v="";if(w.__cdata!=null){v+="<![CDATA["+w.__cdata+"]]>";}if(w.__text!=null){if(t.escapeMode){v+=n(w.__text);}else{v+=w.__text;}}return v;}function b(w){var v="";if(w instanceof Object){v+=e(w);}else{if(w!=null){if(t.escapeMode){v+=n(w);}else{v+=w;}}}return v;}function d(x,z,y){var v="";if(x.length==0){v+=k(x,z,y,true);}else{for(var w=0;w<x.length;w++){v+=k(x[w],z,a(x[w]),false);v+=c(x[w]);v+=h(x[w],z);}}return v;}function c(B){var v="";var z=l(B);if(z>0){for(var y in B){if(s(B,y)){continue;}var x=B[y];var A=a(x);if(x==null||x==undefined){v+=k(x,y,A,true);}else{if(x instanceof Object){if(x instanceof Array){v+=d(x,y,A);}else{var w=l(x);if(w>0||x.__text!=null||x.__cdata!=null){v+=k(x,y,A,false);v+=c(x);v+=h(x,y);}else{v+=k(x,y,A,true);}}}else{v+=k(x,y,A,false);v+=b(x);v+=h(x,y);}}}}v+=b(B);return v;}this.parseXmlString=function(v){if(v===undefined){return null;}var w;if(window.DOMParser){var x=new window.DOMParser();w=x.parseFromString(v,"text/xml");}else{if(v.indexOf("<?")==0){v=v.substr(v.indexOf("?>")+2);}w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";w.loadXML(v);}return w;};this.asArray=function(v){if(v instanceof Array){return v;}else{return[v];}};this.xml2json=function(v){return u(v);};this.xml_str2json=function(v){var w=this.parseXmlString(v);return this.xml2json(w);};this.json2xml_str=function(v){return c(v);};this.json2xml=function(w){var v=this.json2xml_str(w);return this.parseXmlString(v);};this.getVersion=function(){return o;};}